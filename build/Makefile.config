CFLAGS := -O -Wall -Wmissing-prototypes -g -fvisibility=hidden

PLATFORM := $(shell uname -o)

PKG_CONFIG := pkg-config

ifeq ($(PLATFORM),Cygwin)
ifneq ($(CC),gcc)
PLATFORM := Windows
# Modules linked together must use same CC
CC := i686-w64-mingw32-gcc
PKG_CONFIG_PATH := /usr/local/cross-tools/i686-w64-mingw32/lib/pkgconfig
PKG_CONFIG := PKG_CONFIG_PATH=$(PKG_CONFIG_PATH) pkg-config --static
endif
endif

ifeq ($(PLATFORM),Windows)
DLPREFIX :=
DLSUFFIX := .dll
PIC :=
else
ifeq ($(PLATFORM),Cygwin)
DLPREFIX := cyg
DLSUFFIX := .dll
PIC :=
else
DLPREFIX := lib
DLSUFFIX := .so
PIC := -fPIC
endif
endif
